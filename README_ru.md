# DevHub PrintSrc v0.0.4

Библиотека генерации печатаемого `.html` файла с исходниками из директории.

В России юридическую силу имеют только бумажные документы.
Распичатайте исходники GitHub, прошейте их и подпишите, если Вам необходимо предоставить результаты заказчику
или зарегистрировать права на исходный код.

Ипортируйте `printsrc` из `dvhb_printsrc`. Можно использовать как есть в `fabfile.py`:

Пример **`fabfile.py`**:

    from dvhb_printsrc import printsrc

Теперь можно запускать:

    $ fabfile printsrc:'path/to/src',outFile.html,,'.py[oc]+$\\,static'

**Примечание:** обратите внимание на двойно обратный слэш в разделении регулярных выражений, потому что это не "сырая" строка! Конечно можно использовать `'или'` из регулярных выражений — `'|'`, но тогда регулярное выражение не будет разбито
на отдельные части (см. описание параметров).

Для автоматической установки добавьте строку в Ваш **`pipreq`** файл:

    git+https://github.com/dvhb/dvhb_printsrc.git@0.0.4#egg=dvhb_printsrc==0.0.4

Параметры функции:

* `in_folder` — папка с исходниками;
* `out_file` — конечный файл для вывода;
* `include` — строка с регулярными выражениями для путей файлов, которые будут добавлены в печать. Можно разделять `r'\,'`;
* `exclude` — строка с регулярными выражениями для путей файлов, которые будут исключены из печати. Можно разделять `r'\,'`;
* `inc_file` — имя файла с регулярными выражениями для путей файлов, которые будут добавлены в печать. Одно на строку;
* `exc_file` — имя файла с регулярными выражениями для путей файлов, которые будут исключены из печати. Одно на строку;
* `toc` — выводить или нет "содержание". Если это строка — она станет заголовком содержания;
* `uparr` — выводить ли после каждого исходника сслыку на начало документа. Если строка — то она будет выведена как
текст ссылки;
* `style` — название css стиля для подсветки синтаксиса из библиотеки `pygments`. Примеры: http://pygments.org/demo/ ;
* `css` — имя css файла с собственными стилями;
* `title` — <title> итогового html файла;
* `verbose` — выводить текущее действие в stdout;
* `binary_ext` — список расширений бинарных файлов (всегда исключаются).

Алгоритм:

Расширение `.html` автоматически добавляется к результирующему файлу.

Регулярные выражения включения и исключение из полученные из строк и из файлов объединяются.

Список с расширениями бинарных файлов всегда добавляется к списку исклчюений.

Сосбвтенные стили добваляются после стилей из `pygments`. Чтобы исключит `pygments` установите `styles` в логическую `ложь`.

На старте все файлы исключены.

Сначала файл проверяется на включение. Если список решулярных выражений для включения пуст — все файлы включаются. Первое совпадение делает файл включённым.

Затем включённый файл проверяется на исключение. Если список регулярных выражений на исключение пуст — вслючённый файл остаётся включённым. Первое совпадение делает файл исключённым и функция проверяет следующий файл.

Если файл включён — функция пытается найти лексер для файла по его имени. Если лексер найден - содержимое файла обрабатывается им и добавляется в результирующий .html файл. Если лексер не найден — функция пытается закодировать содержимое файла в `UTF-8`. В случае удачи — он заключается в блоки `<div class="highlight"><pre>\n{0}\n</pre></div>` и добавляется в результирующий .html файл.
